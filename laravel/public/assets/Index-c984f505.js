import{B as P,r as g,q as T,o as r,e as V,w as s,b as t,i as A,d as o,l as D,k as f,t as n,j as u,g as k,c as m,F as b,f as y,C as E,D as F,p as _}from"./index-59e8678e.js";import{u as M}from"./Users-52988c15.js";import{V as c,a as C}from"./VRow-9581243d.js";import{V as x}from"./VAlert-ba5bd8b8.js";import{V as R}from"./VPagination-c274ac67.js";import{V as j,b as q}from"./VCard-67f3ee41.js";const K=["value"],L={key:1,class:"d-block"},Y={__name:"Index",setup(G){const e=M(),h=P(),v=g([]),U=g([{text:"Id",value:"id",sortable:!1},{text:"Name",align:"start",sortable:!1,value:"name"},{text:"Email",align:"start",sortable:!1,value:"email"},{text:"Role",align:"start",sortable:!1,value:"roles"},{text:"Actions",value:"actions",sortable:!1}]),I=g([5,10,20]),i=async()=>{await e.fetchUsers(),v.value=e.users.map(B)},w=a=>{e.params.page=a,i()},S=a=>{e.params.size=a,e.params.page=1,i()},B=a=>({id:a.id,name:a.name,email:a.email,role:a.roles[0]}),N=a=>{h.push({name:"EditUser",params:{id:a}})},$=a=>{confirm("Are you sure you want to delete?")&&(e.deleteUser(a),i())};return T(()=>{i()}),(a,d)=>(r(),V(C,{align:"center",class:"list px-3 mx-auto"},{default:s(()=>[t(c,{cols:"12",sm:"8"},{default:s(()=>[t(A,{modelValue:o(e).params.keyword,"onUpdate:modelValue":d[0]||(d[0]=l=>o(e).params.keyword=l),label:"Search by Name",onKeyup:d[1]||(d[1]=l=>{a.page=1,i()})},null,8,["modelValue"])]),_:1}),t(c,{cols:"12",sm:"4"},{default:s(()=>[t(D,{color:"success",to:{name:"CreateUser"}},{default:s(()=>[f(n(a.$t("create_button")),1)]),_:1})]),_:1}),t(c,{cols:"12",sm:"12"},{default:s(()=>[o(e).successMsg?(r(),V(x,{key:0,class:"custom-alert-class",type:"success",variant:"tonal",border:"start",elevation:"2",closable:"","close-label":a.$t("close")},{default:s(()=>[u("small",null,n(o(e).successMsg),1)]),_:1},8,["close-label"])):k("",!0),o(e).errors.length!==0?(r(),V(x,{key:1,class:"custom-alert-class",type:"error",variant:"tonal",border:"start",elevation:"2",closable:"","close-label":a.$t("close")},{default:s(()=>[typeof o(e).errors=="object"?(r(!0),m(b,{key:0},y(o(e).errors,(l,p)=>(r(),m("small",{class:"d-block",value:p,key:p},n(l),9,K))),128)):(r(),m("small",L,n(o(e).errors),1))]),_:1},8,["close-label"])):k("",!0),t(C,null,{default:s(()=>[t(c,{cols:"4",sm:"3"},{default:s(()=>[t(E,{modelValue:o(e).params.size,"onUpdate:modelValue":[d[2]||(d[2]=l=>o(e).params.size=l),S],items:I.value,label:"Items per Page"},null,8,["modelValue","items"])]),_:1}),t(c,{cols:"12",sm:"9"},{default:s(()=>[t(R,{rounded:"circle",modelValue:o(e).params.page,"onUpdate:modelValue":[d[3]||(d[3]=l=>o(e).params.page=l),w],length:o(e).params.totalPages,"total-visible":"7","next-icon":"mdi-menu-right","prev-icon":"mdi-menu-left"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1}),t(c,{cols:"12",sm:"12"},{default:s(()=>[t(j,{class:"mx-auto",tile:""},{default:s(()=>[t(q,null,{default:s(()=>[f("Users")]),_:1}),t(F,null,{default:s(()=>[u("thead",null,[u("tr",null,[(r(!0),m(b,null,y(U.value,l=>(r(),m("th",{key:l.id},n(l.text),1))),128))])]),u("tbody",null,[(r(!0),m(b,null,y(v.value,l=>{var p;return r(),m("tr",{key:l.id},[u("td",null,n(l.id),1),u("td",null,n(l.name),1),u("td",null,n(l.email),1),u("td",null,n((p=l.role)==null?void 0:p.name),1),u("td",null,[t(_,{small:"",color:"primary",class:"mr-2",onClick:z=>N(l.id)},{default:s(()=>[f("mdi-pencil")]),_:2},1032,["onClick"]),t(_,{small:"",color:"error",onClick:z=>$(l.id)},{default:s(()=>[f("mdi-delete")]),_:2},1032,["onClick"])])])}),128))])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Y as default};
