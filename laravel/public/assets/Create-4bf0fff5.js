import{r as c,q as g,o as n,c as u,b as e,w as s,p as w,k as m,l as d,d as o,e as V,j as h,t as f,g as b,F as B,f as N,h as S,i as x,C as F,m as A,n as M,v as U}from"./index-0f7c46ae.js";import{u as q}from"./Users-eeb000dd.js";import{V as _}from"./VAlert-d7a16514.js";import{b as P,c as R,V as T}from"./VCard-4ef62870.js";import{V as $}from"./VForm-cfd2fd47.js";import{a as j,V as k}from"./VRow-999e1338.js";const D=["value"],z={key:1,class:"d-block"},O={__name:"Create",setup(E){const t=q(),i=c({name:"",permissions:[]}),p=c(!1),y=c({name:[l=>l?!0:"Name is required",l=>(l==null?void 0:l.length)>=4?!0:"Name must be less than 4 charcters"]}),C=async l=>{await t.addRole(l)};return g(async()=>{t.fetchPermissions()}),(l,r)=>(n(),u("div",null,[e(d,{height:"45",class:"mb-5 text-white",color:"#A9AB7F",onClick:l.goBack},{default:s(()=>[e(w,{start:"",icon:"mdi-arrow-left"}),m(" Back ")]),_:1},8,["onClick"]),e(T,{class:"mx-auto pa-12 pb-8",elevation:"8"},{default:s(()=>[o(t).successMsg?(n(),V(_,{key:0,class:"custom-alert-class",type:"success",variant:"tonal",border:"start",elevation:"2",closable:"","close-label":l.$t("close")},{default:s(()=>[h("small",null,f(o(t).successMsg),1)]),_:1},8,["close-label"])):b("",!0),o(t).errors.length!==0?(n(),V(_,{key:1,class:"custom-alert-class",type:"error",variant:"tonal",border:"start",elevation:"2",closable:"","close-label":l.$t("close")},{default:s(()=>[typeof o(t).errors=="object"?(n(!0),u(B,{key:0},N(o(t).errors,(a,v)=>(n(),u("small",{class:"d-block",value:v,key:v},f(a),9,D))),128)):(n(),u("small",z,f(o(t).errors),1))]),_:1},8,["close-label"])):b("",!0),e(P,{class:"mb-2"},{default:s(()=>[m(" Create Role ")]),_:1}),e($,{modelValue:p.value,"onUpdate:modelValue":r[2]||(r[2]=a=>p.value=a),onSubmit:r[3]||(r[3]=S(a=>C(i.value),["prevent"]))},{default:s(()=>[e(j,null,{default:s(()=>[e(k,{cols:"12",md:"4"},{default:s(()=>[e(x,{modelValue:i.value.name,"onUpdate:modelValue":r[0]||(r[0]=a=>i.value.name=a),rules:y.value.name,counter:4,label:"Name",variant:"solo",required:""},null,8,["modelValue","rules"])]),_:1}),e(k,{cols:"12",md:"4"},{default:s(()=>[e(F,{modelValue:i.value.permissions,"onUpdate:modelValue":r[1]||(r[1]=a=>i.value.permissions=a),items:o(t).permissions,label:"Permissions",variant:"solo","item-title":a=>a.name,"item-value":a=>a.id,"item-disabled":!1,multiple:""},null,8,["modelValue","items","item-title","item-value"])]),_:1})]),_:1}),e(R,null,{default:s(()=>[e(d,{color:"error",variant:"elevated"},{default:s(()=>[m("Cancel")]),_:1}),e(d,{type:"submit",color:"success",variant:"elevated"},{default:s(()=>[A(e(M,{indeterminate:"",color:"white",class:"mx-3",size:"25"},null,512),[[U,o(t).loading]]),m(" Save ")]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]))}};export{O as default};
