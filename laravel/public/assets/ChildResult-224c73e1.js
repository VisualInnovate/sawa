import{_ as Y,A as m,a as x,o as h,c as B,b as r,w as o,p,k as c,t as i,l as k,e as f,g as b,j as s,C as A,a9 as $,i as _,aa as V,h as P,ab as I,ac as S}from"./index-0f7c46ae.js";import{C as v,s as R,a as M}from"./button.esm-3407a46b.js";import{h as y}from"./moment-fbc5633a.js";import{V as E}from"./VAlert-d7a16514.js";import{b as X,V as N}from"./VCard-4ef62870.js";import{V as D}from"./VForm-cfd2fd47.js";const U={data(){return{search:"",headers:[],result:[],alert_text:null,ctx:null,created_at:[],latePercenteges:[],growAge:[],diffAge:[],date1:"",date2:"",myCahrt:"",selectX:null,selectY:null,visible:!1,examDate:"",NameRules:[t=>t?!0:"This field is required"],examId:"",loading:!0}},methods:{getResults(){m.post(`/api/evaluations/${this.$route.params.child_id}/${this.$route.params.sideProfile_id}/${this.$route.params.evaluation_id}/result`,{date1:this.date1,date2:this.date2}).then(t=>{this.result=t.data.resultEvaluation,this.loading=!1,console.log(this.result),this.created_at=[],this.latePercenteges=[],this.growAge=[],this.diffAge=[],this.result.forEach(e=>{this.created_at.push(y(e.result_created_at).format("DD-MM-YYYY")),this.latePercenteges.push(e.late_percentage),this.growAge.push(e.grow_age),this.diffAge.push(e.diff_age)}),console.log(this.latePercenteges),this.ctx=document.getElementById("myChart").getContext("2d"),this.myCahrt=new v(this.ctx,{type:"bar",data:{datasets:[{label:"late percentages ",data:this.latePercenteges,borderWidth:1,backgroundColor:"#A9AB7F",barPercentage:.5,categoryPercentage:.2},{label:"Different ages ",data:this.diffAge,borderWidth:1,backgroundColor:"#4c9499",barPercentage:.5,categoryPercentage:.2},{label:"grow Age  ",data:this.growAge,borderWidth:1,backgroundColor:"#135C65",barPercentage:.5,categoryPercentage:.2}]},options:{align:"start",scales:{y:{beginAtZero:!0},x:{grid:{drawOnChartArea:!1},type:"category",labels:this.created_at}},grid:{top:"6",right:"0",bottom:"17",left:"25"},animation:{duration:2e3}}}),console.log(this.latePercenteges)})},formateDate(t){return y(t).format("DD-MM-YYYY HH:mm")},print(){this.$router.push({name:"printChildResult",params:{child_id:this.$route.params.child_id,sideProfile_id:this.$route.params.sideProfile_id,evaluation_id:this.$route.params.evaluation_id}})},filter(){m.post(`/api/evaluations/${this.$route.params.child_id}/${this.$route.params.sideProfile_id}/${this.$route.params.evaluation_id}/result`,{date1:this.date1,date2:this.date2}).then(t=>{this.result=t.data.resultEvaluation,console.log(this.result),this.created_at=[],this.latePercenteges=[],this.growAge=[],this.diffAge=[],this.result.forEach(e=>{this.created_at.push(y(e.result_created_at).format("DD-MM-YYYY")),this.latePercenteges.push(e.late_percentage),this.growAge.push(e.grow_age),this.diffAge.push(e.diff_age)}),console.log(this.latePercenteges),this.ctx=document.getElementById("myChart"),this.myCahrt.destroy(),this.myCahrt=new v(this.ctx,{type:"bar",data:{datasets:[{label:"late percentages ",data:this.latePercenteges,borderWidth:1,backgroundColor:"#A9AB7F",barPercentage:.5,categoryPercentage:.2},{label:"Different ages ",data:this.diffAge,borderWidth:1,backgroundColor:"#4c9499",barPercentage:.5,categoryPercentage:.2},{label:"grow Age  ",data:this.growAge,borderWidth:1,backgroundColor:"#135C65",barPercentage:.5,categoryPercentage:.2}]},options:{align:"start",scales:{y:{beginAtZero:!0},x:{grid:{drawOnChartArea:!1},type:"category",labels:this.created_at}},grid:{top:"6",right:"0",bottom:"17",left:"25"},animation:{duration:2e3}}}),console.log(this.latePercenteges)})},editChart(){let t=[{title:this.$t("grow_age"),value:this.growAge},{title:this.$t("diff_age"),value:this.diffAge},{title:this.$t("late_percentage"),value:this.latePercenteges}];this.myCahrt.destroy(),this.myCahrt=new v(this.ctx,{type:"bar",data:{datasets:[{label:t[this.selectY].title,data:t[this.selectY].value,borderWidth:1,backgroundColor:"#135C65",barPercentage:.5,categoryPercentage:.2}]},options:{align:"start",scales:{y:{beginAtZero:!0},x:{grid:{drawOnChartArea:!1},type:"category",labels:t[this.selectX].value}},grid:{top:"6",right:"0",bottom:"17",left:"25"},animation:{duration:2e3}}})},editItem(t,e){this.visible=!0,this.examDate=t,this.examId=e},async submit(t){console.log(t);const{valid:e}=await this.$refs.form.validate();e&&m.post(`/api/evaluations/${this.examId}`,{date:this.examDate}).then(u=>{this.alert_text="evaluation edited successfully  ",this.visible=!1,this.type="success",this.getResults()}).catch(u=>{this.alert_text=u.response.data.message,this.type="error",this.visible=!1})}},components:{Dialog:R,Button:M},mounted(){this.getResults()},computed:{locale(){return this.$i18n.locale},header(){return this.headers=[{title:"id"},{key:"therapist_name",title:this.$t("therapist_name")},{key:"grow_age",title:this.$t("grow_age")},{key:"diff_age",title:this.$t("diff_age")},{key:"late_percentage",title:this.$t("late_percentage")},{key:"basal_age",title:this.$t("basal_age")},{key:"child_age",title:this.$t("child_age")},{key:"result_created_at",title:this.$t("created_at")},{title:this.$t("operation")}]},firstSelectBoxComputed(){return[{title:this.$t("grow_age"),value:0},{title:this.$t("diff_age"),value:1},{title:this.$t("late_percentage"),value:2}].filter(u=>u.value!=this.selectY)},secondSelectBoxComputed(){return[{title:this.$t("grow_age",this.locale),value:0},{title:this.$t("diff_age"),value:1},{title:this.$t("late_percentage"),value:2}].filter(u=>u.value!=this.selectX)}},watch:{selectX(t){this.selectX!=null&&this.selectY!=null&&this.editChart()},selectY(t){this.selectX!=null&&this.selectY!=null&&this.editChart()}}},W=t=>(I("data-v-b5ec184e"),t=t(),S(),t),F={class:"v-row mb-5 mt-5"},T=W(()=>s("canvas",{id:"myChart"},null,-1)),O={class:"text-center"},Z={class:"text-center"};function H(t,e,u,j,l,n){const C=x("Dialog"),w=x("v-data-table");return h(),B("div",null,[r(k,{height:"45",class:"mb-5 text-white",color:"#135C65",onClick:t.goBack},{default:o(()=>[r(p,{start:"",icon:"mdi-arrow-left"}),c(" "+i(t.$t("back")),1)]),_:1},8,["onClick"]),l.alert_text!=null?(h(),f(E,{key:0,type:"success",variant:"tonal",border:"start",elevation:"2",closable:"","close-label":t.$t("close"),text:l.alert_text,class:"mb-8"},null,8,["close-label","text"])):b("",!0),s("div",F,[r(A,{class:"mx-9",label:t.$t("xAxis"),modelValue:l.selectX,"onUpdate:modelValue":e[0]||(e[0]=a=>l.selectX=a),items:n.firstSelectBoxComputed},null,8,["label","modelValue","items"]),r(A,{class:"mx-9",label:t.$t("yAxis"),modelValue:l.selectY,"onUpdate:modelValue":e[1]||(e[1]=a=>l.selectY=a),items:n.secondSelectBoxComputed},null,8,["label","modelValue","items"])]),T,r(N,null,{default:o(()=>[r(X,null,{default:o(()=>[c(" Results "),r($),r(_,{modelValue:l.search,"onUpdate:modelValue":e[2]||(e[2]=a=>l.search=a),"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},null,8,["modelValue"])]),_:1}),r(k,{text:"print",color:"#ACAE84",height:"45",class:"mb-5 mt-5",onClick:n.print},{default:o(()=>[c(" print ")]),_:1},8,["onClick"]),r(w,{headers:n.header,items:l.result,search:l.search},{top:o(()=>[l.loading?(h(),f(V,{key:0,slot:"progress",style:{color:"#135c65"},indeterminate:""})):b("",!0)]),item:o(({item:a,index:g})=>[s("tr",null,[s("td",null,i(g+1),1),s("td",null,i(a.columns.therapist_name),1),s("td",null,i(a.columns.grow_age),1),s("td",null,i(a.columns.diff_age),1),s("td",null,i(Math.round(a.columns.late_percentage))+" %",1),s("td",null,i(a.columns.basal_age)+" months",1),s("td",null,i(a.columns.child_age)+" months",1),s("td",null,i(n.formateDate(a.columns.result_created_at)),1),s("td",O,[r(p,{small:"",color:"primary",class:"mr-2",onClick:d=>n.editItem(a.raw.result_created_at,a.raw.id)},{default:o(()=>[c("mdi-pencil")]),_:2},1032,["onClick"]),r(C,{visible:l.visible,"onUpdate:visible":e[6]||(e[6]=d=>l.visible=d),modal:"",header:" ",style:{width:"50vw"}},{default:o(()=>[r(D,{"fast-fail":"",onSubmit:e[5]||(e[5]=P(()=>{},["prevent"])),ref:"form"},{default:o(()=>[r(_,{modelValue:l.examDate,"onUpdate:modelValue":e[3]||(e[3]=d=>l.examDate=d),rules:l.NameRules,label:t.$t("examDate"),type:"datetime-local"},null,8,["modelValue","rules","label"]),s("button",{class:"bg-blue pa-3 rounded",onClick:e[4]||(e[4]=(...d)=>n.submit&&n.submit(...d))},i(t.$t("submit")),1)]),_:1},512)]),_:1},8,["visible"])])])]),_:1},8,["headers","items","search"])]),_:1}),r(w,{class:"hidden-table",headers:n.header,items:l.result,search:l.search,id:"print","hide-default-footer":"","disable-pagination":""},{top:o(()=>[l.loading?(h(),f(V,{key:0,slot:"progress",style:{color:"#135c65"},indeterminate:""})):b("",!0)]),item:o(({item:a,index:g})=>[s("tr",null,[s("td",null,i(g+1),1),s("td",null,i(a.columns.therapist_name),1),s("td",null,i(a.columns.grow_age),1),s("td",null,i(a.columns.diff_age),1),s("td",null,i(Math.round(a.columns.late_percentage))+" %",1),s("td",null,i(a.columns.basal_age)+" months",1),s("td",null,i(a.columns.child_age)+" months",1),s("td",null,i(n.formateDate(a.columns.result_created_at)),1),s("td",Z,[r(p,{small:"",color:"primary",class:"mr-2",onClick:d=>n.editItem(a.raw.result_created_at,a.raw.id)},{default:o(()=>[c("mdi-pencil")]),_:2},1032,["onClick"]),r(C,{visible:l.visible,"onUpdate:visible":e[10]||(e[10]=d=>l.visible=d),modal:"",header:" ",style:{width:"50vw"}},{default:o(()=>[r(D,{"fast-fail":"",onSubmit:e[9]||(e[9]=P(()=>{},["prevent"])),ref:"form"},{default:o(()=>[r(_,{modelValue:l.examDate,"onUpdate:modelValue":e[7]||(e[7]=d=>l.examDate=d),rules:l.NameRules,label:t.$t("examDate"),type:"datetime-local"},null,8,["modelValue","rules","label"]),s("button",{class:"bg-blue pa-3 rounded",onClick:e[8]||(e[8]=(...d)=>n.submit&&n.submit(...d))},i(t.$t("submit")),1)]),_:1},512)]),_:1},8,["visible"])])])]),bottom:o(()=>[]),_:1},8,["headers","items","search"])])}const Q=Y(U,[["render",H],["__scopeId","data-v-b5ec184e"]]);export{Q as default};
